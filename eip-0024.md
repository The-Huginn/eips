# Artwork Standard

* Author: anon_real
* Status: Proposed
* Created: 25-Oct-2021
* License: CC0
* Forking: not needed 

## Motivation 
With the discovery that we can easily use spent boxes in contracts ([see here](https://www.ergoforum.org/t/ergoscript-design-patterns/222/23?u=anon_real)), some new features are introduced for artworks and can be extended further in the future. This EIP is an extension of [Asset standard](eip-0004.md) and tents to standardize artwork issuance in particular.


## Design V1
There are two important boxes in the issuance process of an artwork.
- The issuance box, which follows [Asset standard](eip-0004.md) depending on the type of artwork.
- The issuer box, which is the first input of the transaction that is issuing the artwork. In particular, the box with the same ID as the artwork's token ID.

Now we will discuss why the issuer box is important and define a standard for it.

The issuer box is important because it has the same ID as the artwork's token ID and we can include it (although it is spent) in our transactions either in registers or as context data. This means that we can prove/verify certain features that an artwork may have using this box. The following is the v1 standard for this box - which may be extended in the future (refer to Design V2 part).

- R4 of this box is an Integer, showing 1000 * royalty percentage of the artwork. e.g, 20 for 2% royalty. If R4 of the issuer box of an artowrk is empty or non-positive, then royalty is considered to be 0%.
- In the current design of the [Auction contranct](eip-0022.md), proposition bytes of this box is the contract that the royalty percentage will be sent to. This is a suboptimal design because of AOT costing mechanism which is supposed to be replaced with JIT costing with a soft-fork that will happen with v5.0 of [ergo node](https://github.com/ergoplatform/ergo).
  
As mentioned, royalty amount will go to the propositiona bytes of the issuer box. In the case of a simple proxy contract (proposition bytes of the issuer box), this means that the artist will receive the royalty share. However, the proxy contract may enforce the royalty to go to any other complex contract - e.g., 20% to the artist, and 80% to some charity.

## Design V2
Version 2 of this proposal is created to both extend this proposal to include collections and fix some poor design choices that were caused by the AOT costing issues. The following is the v2 standard for this box.
- R4 of this box is an Integer, showing 1000 * royalty percentage of the artwork. e.g, 20 for 2% royalty. If R4 of the issuer box of an artwork is empty or non-positive, then royalty is considered to be 0%.
- R5 of this box is an integer showing the artwork standard version. If This register is empty, or the type is something other than integer, then it should be considered as part of V1 design. Otherwise, this register shows the version number for the standard.
- R6 of this box is of type Coll[(Coll[Byte], Int)] that shows information about royalty, in particular, a list of royalty receivers and their respective share. The `Coll[Byte]` part is the ergo tree of one of the royalty receivers and the `Int` part is a number between 1 and 100 showing the share of this receiver. The sum of shares for royalty receivers must add up to 100.
In this version of the standard, unlike V1, we don't specify how the royalty will be sent to the receivers. In V1, the proposition bytes of the issuer box receive the royalty amount. However, in this version, the royalty amounts may go to receivers specified in R6 or the proposition bytes of the issuer box depending on the [auction contract](eip-0022.md) standard. So NFT developers need to be careful about both R6 and the proposition bytes of the issuer box to be compatible.
- R7 of this box may contain a JSON specifying trait values for the NFT as Coll[Byte]. 
There are three types of traits:
  - Properties: These are textual traits such as specifying `sex` as `male`.
  - Levels: These are numerical traits that encode some sort of level-like information such as specifying `speed` as `60 out of 100`.
  - Stats: These are numerical traits that encode any numerical information about the NFT such as specifying `age` as `25 out of 50`.

Although levels and stats are very similar, they can be considered different in marketplaces both for UI/UX purposes and also for filtering purposes.

The following specifies the structure for traits.
```json
{
    "properties": [
        {
            "key": "NAME_OF_PROPERTY1",
            "value": "VALUE_OF_PROPERTY1"
        },
        {
            "key": "NAME_OF_PROPERTY2",
            "value": "VALUE_OF_PROPERTY2"
        }
    ],
    "levels": [
        {
            "key": "NAME_OF_LEVEL1",
            "value": LEVEL1_VALUE_NUMBER,
            "max": LEVEL1_MAX_ALLOWED_NUMBER,
        },
        {
            "key": "NAME_OF_LEVEL2",
            "value": LEVEL2_VALUE_NUMBER,
            "max": LEVEL2_MAX_ALLOWED_NUMBER,
        }
    ],
    "stats": [
        {
            "key": "NAME_OF_STAT1",
            "value": STAT1_VALUE_NUMBER,
            "max": STAT1_MAX_ALLOWED_NUMBER,
        },
        {
            "key": "NAME_OF_STAT2",
            "value": STAT2_VALUE_NUMBER,
            "max": STAT2_MAX_ALLOWED_NUMBER,
        }
    ]
}
```

The following is an example of traits for some imaginary NFT.
```json
{
    "properties": [
        {
            "key": "sex",
            "value": "male"
        },
        {
            "key": "hair color",
            "value": "blue"
        }
    ],
    "levels": [
        {
            "key": "power",
            "value": 20,
            "max": 100,
        },
        {
            "key": "speed",
            "value": 15,
            "max": 80,
        }
    ],
    "stats": [
        {
            "key": "rank",
            "value": 3,
            "max": 70,
        },
        {
            "key": "number of swords",
            "value": 30,
            "max": 80,
        }
    ]
}
```

- If the artwork is part of a collection, R8 of this box contains token ID of the collection as Coll[Byte] otherwise it is an empty Coll[Byte]. This is needed for two cases:
  - if the issuer box contains more than one collection token, this will specify which one is the one that the artist intended to put the artwork in.
  - if the issue box contains some collection tokens but the artist does not intend to put the artwork in any collections. In this case, this register must be an empty Coll[Byte].


## Artist Identity
Artist identity is very important for any auction house to eliminate NFT copies and scams for the end-users.

The identity of the artist can not necessarily be determined with the issuance box (unless it is a P2PK box) since its correctness can not be verified, e.g., one can impersonate an artist.

Hence, the artist's identity and address are determined with the first P2PK input in the chain of transactions leading to the artwork issuance. This means that in the case of using proxy contracts, the first input of the transaction that is sending the funds to the proxy contract is going to determine the artist's identity.